extends ../base.pug
include ../../mixins/input/input.pug
include ../../mixins/chat-preview/chat-preview.pug


block vars
    - let pageTitle="поболтаем?"
    -   
        //- mock
        let currentChat = {
            contact: "Che Cat",
            avatarSrc: "https://i.pinimg.com/564x/28/58/4d/28584d9b724c390f530ee2039bffd69e.jpg",
            lastMsg: "Он превратился в поросёнка",
            author: "self",
            updateTime: "23:29",
        }; 
        let chatlistData = [
            {
                contact: "Design Destroyer",
                avatarSrc: "/",
                lastMsg: "В 2008 году художник Jon Rafman  начал собирать, но так и не собрал",
                updateTime: "23:14",
                newMsgCounter: "1"
            }, 
            {
                contact: "Комерсантъ",
                avatarSrc: "https://im.kommersant.ru/Issues.photo/WEEKEND/2020/016/KMO_154161_02288_1_t250_190019.webp",
                lastMsg: "Индийский зомби-хоррор и «Зимний вечер» Пушкина, бредовая работа и мемы в культуре, экскурсия по дому Рубенса и марафон к 80-летию Бродского, Мельбурнский симфонический оркестр и Дельфин, а также огромный архив видеоарта и «Три сестры» Олега Ефремова — рассказываем о главных культурных событиях в режиме онлайн с 22 по 28 мая",
                updateTime: "22:11",
            }, 
            {
                contact: "Василий",
                avatarSrc: "/",
                lastMsg: "там Илюха опять какую-то чепуху придумал",
                updateTime: "22:10",
            },
            {
                contact: "Вечность",
                avatarSrc: "https://www.meme-arsenal.com/memes/f305ca1a1c7396db54fce8338b485f6a.jpg",
                lastMsg: "Если вами полакомились комары, лекарством от воспаления и зуда станет сода. Смешайте 3 ч. л. соды с 1 ч. л. воды до образования густой пасты, нанесите кашицу на место укуса и дайте высохнуть.",
                updateTime: "22:03",
                newMsgCounter: "1"
            }, 
            {
                contact: "тет-а-теты",
                avatarSrc: "/",
                lastMsg: "И Human Interface Guidelines и Material Design рекомендуют",
                updateTime: "21:30",
            }, 
            {
                contact: "Ошибка редактора",
                avatarSrc: "https://panorama.pub/storage/images/2e/81/019671b7078ea631d58a46ec8aab/previews/18617-main.jpg.webp",
                lastMsg: "Дарвин писал, что человек произошёл от кошки",
                updateTime: "21:30",
            }, 
            {
                contact: "vilvarin",
                avatarSrc: "https://demiart.ru/forum/avatars/av-340217.jpg",
                lastMsg: "Только поезд показался дружелюбно-красивым, остальное - интерьеры для фильмов ужасов",
                updateTime: "19:14",
                newMsgCounter: "2"
            }, 
            {
                contact: "Илья",
                avatarSrc: "/",
                lastMsg: "Друзья, у меня для вас особенный выпуск новостей!",
                updateTime: "17:09",
                newMsgCounter: "4"
            },
            {
                contact: "Tinder",
                avatarSrc: "https://panorama.pub/storage/images/3e/8b/d037e728267619b452e4feb2a674/previews/18620-main.jpg.webp",
                lastMsg: "Мы перестаем отображать биологический пол, потому что он «никому не важен, кроме трансфобов»",
                updateTime: "13:33",
            }, 
            {
                contact: "Инносми",
                avatarSrc: "https://panorama.pub/storage/images/24/fc/f2fea63741b7a3a411971fe5ce45/previews/18621-main.jpg.webp",
                lastMsg: "Пепси-кола, джинсы, видеомагнитофоны: названы предметы, которые чаще всего находят при обысках у шпионов и иноагентов",
                updateTime: "Вчера",
            }, 
            {
                contact: "тык-тыдык",
                avatarSrc: "/",
                lastMsg: "Спасибо, что все это время были с нами",
                author: "self",
                updateTime: "Вчера",
            }, 
            {
                contact: "Ну всё",
                avatarSrc: "http://moykon.ru/wp-content/uploads/2015/06/iskorka00.jpg",
                lastMsg: "Это конец",
                updateTime: "27 Мар 2023",
                newMsgCounter: "23"
            }
        ]
        let chatData = [

            {
                text: "Он превратился в поросёнка",
                time: "23:29",
                status: "delivered",
                author: "self",
            },
            {
                text: "Кстати, что произошло с ребёнком? Я чуть не забыл тебя спросить",
                time: "23:28",
                author: "cCat",
            },
            {
                text: "Ты меня увидишь там",
                time: "23:15",
                author: "cCat",
            },
            {
                text: "Я была бы очень рада, но я не приглашена ещё",
                time: "23:15",
                status: "read",
                author: "self",
            },
            {
                text: "Называй как хочешь. Ты играешь сегодня с Королевой в крокет?",
                time: "23:14",
                author: "cCat",
            },
            {
                text: "Я называю это мурлыканьем, а не ворчанием",
                time: "23:14",
                status: "read",
                author: "self",
            },
            {
                text: "Ну, тогда дальше. Видишь ли, собака ворчит, когда она сердита, и машет хвостом, когда она довольна. Ну а я ворчу, когда я доволен, и машу хвостом, когда я сердит. Поэтому я — сумасшедший.",
                time: "23:23",
                author: "cCat",
            },
            {
                text: "Я полагаю, что это так.",
                time: "23:07",
                status: "read",
                author: "self",
            },
            {
                text: "Начать с того, что собака не сумасшедшая. Ты согласна с этим?",
                time: "23:06",
                author: "cCat",
            },
            {
                text: "А почему вы знаете, что вы сумасшедший?",
                time: "23:02",
                status: "read",
                author: "self",
            },
            {
                text: "Ты безусловно должна быть сумасшедшей, иначе ты не попала бы сюда.",
                time: "23:02",
                author: "cCat",
            },

            {
                text: "Откуда вы знаете, что я сумасшедшая?",
                time: "23:01",
                status: "read",
                author: "self",
            },
            {
                text: "О, ты ничего не можешь с этим поделать. Мы все здесь сумасшедшие. Я сумасшедший. Ты сумасшедшая.",
                time: "23:01",
                author: "cCat",
            },
            {
                text: "Но я вовсе не желаю путешествовать среди сумасшедших.",
                time: "23:00",
                status: "read",
                author: "self",
            },
            {
                text: "В этом направлении живёт Шляпочник, а в том — Мартовский Заяц. Навести кого хочешь: они оба — сумасшедшие.",
                time: "22:59",
                author: "cCat",
            },
            {
                text: "Что за люди живут здесь в окрестностях?",
                time: "22:57",
                status: "read",
                author: "self",
            },
            {
                text: "О, наверно, так и получится, если только ты пойдёшь достаточно далеко.",
                time: "22:56",
                author: "cCat",
            },
            {
                text: "Так далеко, чтобы прийти куда-нибудь.",
                time: "22:56",
                status: "read",
                author: "self",
            },
            {
                text: "Тогда не имеет значения, по какой дороге ты пойдёшь.",
                time: "22:54",
                author: "cCat",
            },
            {
                text: "Я не очень забочусь, куда именно...",
                time: "22:54",
                status: "read",
                author: "self",
            },
            {
                text: "Это в большой степени зависит от того, куда ты хочешь прийти.",
                time: "22:54",
                author: "cCat",
            },
            {
                text: "Не будете ли вы добры сказать мне, по какой дороге я могу уйти отсюда?",
                time: "22:54",
                status: "read",
                author: "self",
            },
        ]

block layout-style
    link(rel="stylesheet" href="../../layouts/quarter-left.css")

block styles
    link(rel="stylesheet" href="./chat.css")

block side
    .chatlist
        .chatlist__header
            a.link.secondary Профиль
            +inputField("Поиск", "chatlistSearch", "search")
        .chatlist__content
            +chatPreview(currentChat)(class="current")
            for data in chatlistData
                +chatPreview(data)

block main
    if (!chatData)
        .intro Выберите чат, чтобы отправить сообщение
    else
        .chat 
            .chat__header
                .contact-info 
                    +avatar(currentChat.avatarSrc,currentChat.contact, 35)(class="contact-info__avatar")
                    h3.contact-info__title #{currentChat.contact}
                .header-tools
                    .more ...
            .chat__main
                for data in chatData 
                    .message(data-author=data.author) 
                        .message__text #{data.text}
                            .message__time #{data.time} 
                            .message__status
                                if(data.status=='read')
                                    i.read-message(title="Сообщение прочитано")
                                else if (data.status=='delivered')
                                    i.delivered-message(title="Сообщение доставлено")
                    if (data.attach) 
                        .message(data-author=data.author) 
                            .message__attach
                            .message__time #{data.time}
            .chat__footer
                .new-message
                    .new-message__attachment att
                    .new-message__input
                        +inputField("Сообщение")
                        button(type="submit") отправить
                        